<html>
<head>
<title>엄비보벳따우</title>
</head>
<body>
  <main>
    <article id='um'></article>
    <article id='jun'></article>
    <article id='sik'></article>
  </main>
  <script>
//     const main = document.getElementsByTagName('main')[0]
//     setTimeout(function() {
//       main.innerHTML += '<iframe width="560" height="315" src="https://www.youtube.com/embed/8j0M5c7UzBE?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'
//     }, 0)
//     setTimeout(function() {
//       main.innerHTML += '<iframe width="560" height="315" src="https://www.youtube.com/embed/fhdzt4QfY6c?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'
//     }, 100)
//     setTimeout(function() {
//       main.innerHTML += '<iframe width="560" height="315" src="https://www.youtube.com/embed/aI5p1H3MD-g?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'
//     }, 200)
    
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    let um, jun, sik
    function onYouTubeIframeAPIReady() {
      um = new YT.Player('um', {
        height: '360',
        width: '640',
        videoId: '8j0M5c7UzBE',
        events: {
          'onReady': onPlayerReady,
        }
      });
     jun = new YT.Player('jun', {
        height: '360',
        width: '640',
        videoId: 'fhdzt4QfY6c',
        events: {
          'onReady': onPlayerReady,
        }
      });
      sik = new YT.Player('sik', {
        height: '360',
        width: '640',
        videoId: 'aI5p1H3MD-g',
        events: {
          'onReady': onPlayerReady,
        }
      });
    }
    const timer = {
      um: 0,
      jun: 100,
      sik: 200,
    }
    async function onPlayerReady(event) {
      document.dispatchEvent(new CustomEvent('loaded', {detail: event.target}))
      event.target.playVideo()
      await setTimeout(function () {event.target.pauseVideo()}, 500)
//       await setTimeout(function () {event.target.playVideo()}, timer[event.target.f.id])
    }
    let flag = {
      um: false,
      jun: false,
      sik: false,
    }
    document.addEventListener('loaded', function (event) {
      flag[event.detail.f.id] = true
      if (flag.um && flag.jun && flag.sik) {
        um.playvideo()
        jun.playvideo()
        sik.playvideo()
      }
    })
  </script>
</body>
</html>
